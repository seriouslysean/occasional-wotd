---
import Heading from '~components/Heading.astro';
import WordList from '~components/WordList.astro';
import Layout from '~layouts/Layout.astro';
import { getPageMetadata } from '~utils-client/page-metadata.ts';
import { STRUCTURED_DATA_TYPE } from '~utils-client/schema-utils.ts';
import { getAvailableLengths, getWordsByLength, getWordsFromCollection } from '~utils-client/word-data-utils';

export async function getStaticPaths() {
  const allWords = await getWordsFromCollection();
  const lengths = getAvailableLengths(allWords).filter(length => Number.isInteger(length) && length > 0);
  return lengths.map(length => ({
    params: { length: String(length) },
    props: { words: getWordsByLength(length, allWords), length },
  }));
}

const { length, words } = Astro.props;
const { title, description } = getPageMetadata(Astro.url.pathname);
---
<Layout title={title} description={description} structuredDataType={STRUCTURED_DATA_TYPE.WORD_LIST}>
  <main class="length-words">
    <Heading level={1} text={String(length)} secondaryText="Letters" />
    <div class="length-words__content">
      <WordList words={words} columns={2} />
    </div>
  </main>
</Layout>

<style>
  .length-words {
    max-width: var(--content-width-medium);
    margin: 0 auto;
  }

  .length-words__content {
    width: 100%;
  }
</style>
