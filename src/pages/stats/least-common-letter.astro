---
import StatsWordListPage from '~components/StatsWordListPage.astro';
import { getAllWords } from '~utils/word-data-utils';
import { getLetterStats, getWordStats } from '~utils/word-stats-utils';

const words = getAllWords();
const wordStats = getWordStats(words);
const letterStats = getLetterStats(wordStats.letterFrequency);

// Get the least common letter and its count
const leastCommonLetter = letterStats.length > 0 ? letterStats[letterStats.length - 1][0] : '';
const leastCommonLetterCount = letterStats.length > 0 ? letterStats[letterStats.length - 1][1] : 0;

// Filter words that contain the least common letter
const wordsWithLeastCommonLetter = words.filter(wordData =>
  wordData.word.toLowerCase().includes(leastCommonLetter),
);
---

<StatsWordListPage 
  words={wordsWithLeastCommonLetter}
  descriptionText={`The letter "${leastCommonLetter}" appears in only ${leastCommonLetterCount} word${leastCommonLetterCount !== 1 ? 's' : ''}, making it the least frequently used letter.`}
/>