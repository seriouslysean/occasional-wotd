---
import StatsWordListPage from '~components/StatsWordListPage.astro';
import { getAllWords } from '~utils/word-data-utils';
import { getLetterStats, getWordStats } from '~utils/word-stats-utils';

const words = getAllWords();
const wordStats = getWordStats(words);
const letterStats = getLetterStats(wordStats.letterFrequency);

// Get the most common letter and its count
const mostCommonLetter = letterStats.length > 0 ? letterStats[0][0] : '';
const mostCommonLetterCount = letterStats.length > 0 ? letterStats[0][1] : 0;

// Filter words that contain the most common letter
const wordsWithMostCommonLetter = words.filter(wordData =>
  wordData.word.toLowerCase().includes(mostCommonLetter),
);
---

<StatsWordListPage
  words={wordsWithMostCommonLetter}
  descriptionText={`The letter "${mostCommonLetter}" appears in ${mostCommonLetterCount} words, making it the most frequently used letter.`}
/>