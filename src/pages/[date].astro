---
import WordPage from '~components/WordPage.astro';
import { getWordUrl as _getWordUrl, getFullUrl } from '~utils/url-utils.js';
import { getAllWords, getWordByDate } from '~utils/word-utils.js';

export async function getStaticPaths() {
  const words = getAllWords();
  const paths = [];

  for (const word of words) {
    const date = word.date;
    if (date) {
      paths.push({ params: { date } });
    }
  }

  return paths;
}

const { date } = Astro.params;
const wordData = getWordByDate(date);

if (!wordData) {
  return Astro.redirect(import.meta.env.BASE_URL || '/');
}

// Generate canonical URL pointing to the word page (not the date page)
const canonicalUrl = getFullUrl(_getWordUrl(wordData.word));
---

<WordPage wordData={wordData} canonicalUrl={canonicalUrl} />


